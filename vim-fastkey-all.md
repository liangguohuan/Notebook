---  
layout: post  
title: vim 快捷键  
categories: ['技术']  
tags: ['vim']  
published: True  

---  

## 普通模式快捷键    

### 根据关键字查找帮助文档或者在帮助文档中链接到对应位置

    `s-k`      # shift + k 触发    

### 撤消和恢复    

    `u`        # 撤销上一个编辑操作
    `ctrl + r` # 恢复，即回退前一个命令
    `U`        # 行撤销，撤销所有在前一个编辑行上的操作

### 中断VIM和恢复

    `ctrl + z`  # 中断VIM
    `fg`        # 恢复VIM, fg是终端命令，意思是返回上一个程序


### 大小写转换

    `gu`  # 转换为小写
    `gU`  # 转换为大写

<!-- more -->

### vim选择技巧

    `vi"`   →  # 会选择 foo.
    `va"`   →  # 会选择 “foo”.
    `vi)`   →  # 会选择 “foo”.
    `va)`   →  # 会选择(“foo”).
    `v2i)`  →  # 会选择 map (+) (“foo”)
    `v2a)`  →  # 会选择 (map (+) (“foo”))’”
    `v%`    →  # 选中括号里的内容,光标在一侧括号
    `vit`   →  # 会选择html标签内的内容
    `gv`    →  # 可以再次visually select上次的区域

### 这里是常用到的一些命令（motion）  

    `fx` # 移动光标到当前行的下一个 x 处。很明显，x 可以是任意一个字母，而且你可以使用 ; 
         # 来重复你的上一个 f 命令。
    `tx` # 和上面的命令类似，但是是移动到 x 的左边一个位置。（这真的很有用）
    `Fx` # 和 fx 类似，不过是往回找。
    `w`  # 光标往前移动一个词。
    `b`  # 光标往后移动一个词。
    `0`  # 移动光标到当前行首。
    `^`  # 移动光标到当前行的第一个字母位置。
    `$`  # 移动光标到行尾。
    `)`  # 移动光标到下一个句子。
    `(`  # 移动光标到上一个句子。

### 从普通模式快速进入插入模式  

    `i`         # 在当前字符的左边插入
    `I`         # 在当前行首插入
    `a`         # 在当前字符的右边插入
    `A`         # 在当前行尾插入
    `o`         # 在当前行下面插入一个新行
    `O`         # 在当前行上面插入一个新行
    `c{motion}` # 删除 motion 命令跨过的字符，并且进入插入模式。
                # 比如 c$，这将会删除从光标位置到行尾的字符并且进入插入模式。ct！，
                # 这会删除从光标位置到下一个叹号（但不包括），然后进入插入模式。
                # 被删除的字符被存在了剪贴板里面，并且可以再粘贴出来。
    `d{motion}` # 和上面差不多，但是不进入插入模式。

### 从普通模式快速进入可视模式  

    `v`     # 按字符选择。经常使用的模式，所以亲自尝试一下它。
    `V`     # 按行选择。这在你想拷贝或者移动很多行的文本的时候特别有用。
    `<C-V>` # 按块选择。非常强大，只在很少的编辑器中才有这样的功能。
            # 你可以选择一个矩形块，并且在这个矩形里面的文本会被高亮。
    `gh`    # 选择文本

### 在整个文件里面有效移动光标  

    `'h、j、k、l'`   # 左上下右移动
    `<C-F>`         # 向下移动一屏。
    `<C-B>`         # 向上移动一屏。
    `G`             # 到文件尾
    `numG`          # 移动光标到指定的行（num）。（比如 10G 就是到第 10 行）
    `gg`            # 到文件首
    `H`             # 移动光标到屏幕上面
    `M`             # 移动光标到屏幕中间
    `L`             # 移动光标到屏幕下面 
    `*`             # 读取光标处的字符串，并且移动光标到它再次出现的地方。
    `#`             # 和上面的类似，但是是往反方向寻找。
    `/text`         # 从当前光标处开始搜索字符串 text，并且到达 text 出现的地方。
                    # 必须使用回车来开始这个搜索命令。
                    # 如果想重复上次的搜索的话，按 n。
    `?text`         # 和上面类似，但是是反方向。
    `ma`            # 在当前光标的位置标记一个书签，名字为 a。书签名只能是小写字母。
                    # 你看不见书签的存在，但它确实已经在那里了。
    `a`             # 到书签 a 处。注意这个不是单引号，它一般位于大部分键盘的 1 的左边。
    `.`             # 到你上次编辑文件的地方。这个命令很有用，而且你不用自己去标记它。

### 复制剪切拷贝 

    `d{motion}` # 剪切 motion 命令跨过的字符到剪贴板。比如，dw 会剪切一个词而 dfS 
                # 会将从当前光标到下一个 S 之间的字符剪切至剪贴板。
    `y{motion}` # 和上面类似，不过是拷贝。
    `c{motion}` # 和 d{motion} 类似，不过最后进入插入模式。
    `dd`        # 剪切当前行。
    `yy`        # 拷贝当前行。
    `cc`        # 剪切当前行并且进入插入模式。
    `D`         # 剪切从光标位置到行尾到剪贴板。
    `Y`         # 拷贝当前行。
    `C`         # 和 D 类似，最后进入插入模式。
    `x`         # 剪切当前字符到剪贴板。
    `s`         # 和x类似，不过最后进入插入模式。
    `d+j`       # 删除光标所在行及下一行
    `d+k`       # 删除光标所在行及上一行
    `d+h`       # 删除光标前一个字符
    `d+l`       # 删除光标所在的一个字符

### 用VIM写代码  

    `]p` # 和 p 的功能差不多，但是它会自动调整被粘贴的文本的缩进去适应当前代码的位置。
    `%`  # 匹配花括号、方括号、括号等。在一个括号的上面，然后按 %，鼠标就会出现在匹配的另外一半括号处。
    `>>` # 缩进所有选择的代码
    `<<` # 和上面类似，但是反缩进
    `gd` # 到达光标所在处函数或者变量的定义处。
    `K`  # 在 Man 里面查找光标当前所在处的词。

### VIM代码块注释，删除注释 

    注释 `ctrl+v`  # 进入列编辑模式，向上或向下移动光标，把需要注释的行的开头标记起来,
                  # 然后按大写的I,再插入注释符,比如"//",再按Esc,就会全部注释了。  
    删除 `ctrl+v`  # 进入列编辑模式，选中注释部分，然后按d，就会删除注释符号。  

### 替换命令  

#### [range]s/pattern/string/[c,e,g,i]

    `range`       # 指的是範圍，1,7 指從第一行至第七行，
        `1,$`     # 指從第一行至最後一行，也就是整篇文章，也可以 % 代表。
        `%`       # 是目前編輯的文章，
        `#`       # 是前一次編輯的文章。  
    `pattern`     # 就是要被替換掉的字串，可以用 regexp 來表示。  
    `string`      # 將 pattern 由 string 所取代。  
    `c`           # confirm，每次替換前會詢問。  
    `e`           # 不顯示 error。  
    `g`           # globe，不詢問，整行替換。多个匹配替换，一般都加上。
    `i`           # ignore 不分大小寫。   

### 窗口控制  

    `ba [n]`             # split all buffer vertically or n
    'vert ba [n]'        # split all buffer horizontally or n
    `Ctrl + w +方向键`    # 切换到前／下／上／后一个窗格
    `Ctrl + w + h/j/k/l` # 同上
    `Ctrl + ww`          # 依次向后切换到下一个窗格中
    `ctrl + w _`         # Max out the height of the current split
    `ctrl + w |`         # Max out the width of the current split
    `ctrl + w =`         # Normalize all split sizes, which is very handy when resizing terminal
    `Ctrl+W R`           # Swap top/bottom or left/right split
    `Ctrl+W o`           # Close every window in the current tabview but the current one
    `:qll`               # 退出所有窗口

## 可视模式快捷键  

### 复制粘贴剪切  

    `d` # 剪贴选择的内容到剪贴板。
    `y` # 拷贝选择的内容到剪贴板。
    `c` # 剪贴选择的内容到剪贴板并且进入插入模式。

### 复制粘贴与系统交互  

    # 先用命令`#reg`查看是否已经支持系统寄存器，系统寄存器为`"*` 和　`"+`  为标记的。
    # 如果不支持需要先安装GVIM就支持了。
    # 提示 `ggVG` 快捷键可以快速选择VIM里的所有内容  
    `"+y`  # 复制内容到系统寄存器 先按照Shift键，再依次按 `"+y`，因为`"+`是需要`Shift`键的  
    `"+p`  # 复制系统寄存器内容到VIM中  

### 折叠快捷键

    `zc`   # 折叠，只折叠最外层的折叠
    `zC`   # 对所在范围内所有嵌套的折叠点进行折叠，包括嵌套的所有折叠.
    `zo`   # 展开折叠，只展开最外层的折叠.
    `zO`   # 对所在范围内所有嵌套的折叠点展开，包括嵌套折叠.
    `[z`   # 到当前打开的折叠的开始处。
    `]z`   # 到当前打开的折叠的末尾处。
    `zj`   # 向下移动。到达下一个折叠的开始处。关闭的折叠也被计入。
    `zk`   # 向上移动到前一折叠的结束处。关闭的折叠也被
    `zd`   # 删除 (delete) 在光标下的折叠。仅当 ‘foldmethod’ 设为 “manual” 或 “marker” 时有效。
    `zD`   # 循环删除 (Delete) 光标下的折叠，即嵌套删除折叠。
           # 仅当 ‘foldmethod’ 设为 “manual” 或 “marker” 时有效。
    `zE`   # 除去 (Eliminate) 窗口里“所有”的折叠。
           # 仅当 ‘foldmethod’ 设为 “manual” 或 “marker” 时有效。
    `zfap` # 将光标移到段落内，然后按zfap，就可以自动对整个段落添加折叠标签
           # 假定你已经创建了若干折叠，而现在需要阅览全部文本。你可以移到每个折叠处，并键入”zo”。
           # 若要做得更快，可以用这个命令:zr
    `zm`   # 这将折叠更多 (M-ore)。你可以重复 “zr” 和 “zm” 来打开和关闭若干层嵌套的折叠，
           # 不然得一个一个的用zc来折叠.
    # 如果你有一个嵌套了好几层深的折叠，你可以用这个命令把它们全部打开:
    `zR`   # 这将减少折叠直至一个也不剩。而用下面这个命令你可以关闭所有的折叠:
    `zM`   # 这将增加折叠，直至所有的折叠都关闭了。
    # 你可以用 |zn| 命令快速禁止折叠功能。然后 |zN| 恢复原来的折叠。|zi| 切换于两者之间。

## 插入模式快捷键  

    `<C-N>` # 关键词自动完成系统，多个候选列表，可以用重复按键来选择
    `<C-P>` # 和`<C-N>`一样，区别只是选择列表是从最后一个向上搜索


## 命令模式快捷键  

    `:n,m co k`        # 复制n到m行，粘贴到k行处（从下一行开始）  
    `:n,m m k`         # 剪切n到m行，粘贴到k行处（从下一行开始）  
    `:n,m d`           # 删除n到m行  
    `:%s/^[n]//g`      # 删除空行  
    `:set invlist`     # 显示隐藏字符  
    `b buffername`     # 切换到指定的buffer,buffername支持自动补全
    `:[count]verb[ose] {command}` # 查找命令定义位置信息
                                  # 例如：verbose highlight SignColumn
    `[range]w [>>][filename]`     # 将内容导出到文件 [>>] 可选项表示追加

### vim命令技巧

    Ctrl-F

用Vim的方式编辑Command-line(EX mode) 在Ex-mode输入命令时，有时需要调整，不能用Vim的方式来编辑， 这时候可以按「Ctrl-F」，切换进「Command-line window」，随意编辑，回车执行。

    Ctrl-D

也可以使用Command-line补全，在Command-line输入命令时，想不起来命令全称了？Tab不好用？试试　Ctrl-D


### Vim中将tab自动转换成空格

> 在Vim中，有时需要将tab转换成space。使用ret命令（replace tab）。

    [range]ret[ab]! [new-tabstop]

举例：将第一行到文件尾的tab转换成space，每个tab用4个space替代。

    :set expandtab
    :%ret! 4

如果没有给定4，则用当前的tab宽度设定替换为space。

其它相关命令：

    :set tabstop=4      # 设定tab宽度为4个字符
    :set shiftwidth=4   # 设定自动缩进为4个字符
    :set expandtab      # 用space替代tab的输入
    :set noexpandtab    # 不用space替代tab的输入